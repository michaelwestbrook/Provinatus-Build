# Provinatus-Build
Contains the code that generates the final output for Provinatus so we don't put a bunch of useless files on other people's computers.

## Official Mod Page
[Provinatus ESOUI](http://www.esoui.com/downloads/info1943-Provinatus.html)

## Prerequisites
- [Yarn](https://yarnpkg.com) - I use 1.3.2, you're experience could differ if you are on a different version.
- This project uses [git submodules](https://git-scm.com/book/en/v2/Git-Tools-Submodules). <br/>
  - To get the full Provinatus experience run the following command. <br/>
  `git clone https://provinatus.visualstudio.com/_git/Provinatus --recurse-submodules`
### Install dependencies
- [Yarn](https://yarnpkg.com) will install [Grunt](https://gruntjs.com/) and needed tasks.

### Yarn Scripts
- [package.json](package.json) includes scripts to automate some tasks. Definitely WIP. <br/>
Run them by calling: <br/>
`yarn run <name of script>`
- list of scripts: <br/>
  - `backup-addons` : This will zip all of your files to `./addon-backup/<timestamp>.zip`. 
  - `build` : Lints Lua files, cleans build directory, copies mod files to build directory, and sets version number in build directory 
  - `release` : Creates a zip file of everything in build directory and drops zip in build directory
  - `deploy` : Copies build files to user's default ESO addon directory.
  - `build-deploy` : Runs `build` and `deploy` steps in series.

### Handy Grunt tasks
- `grunt clean:build` : deletes `./build` folder (or `--releaseFolder` if provided). 

- `grunt copy:build` : copies addon files to the `./build` directory
- `grunt replace:version`
  - Replaces text in select folders with the version number. 
  - ESOUI.com release numbers are generated by [Provinatus-CI](https://provinatus.visualstudio.com/Provinatus/_build/index?context=mine&path=%5C&definitionId=3&_a=completed) build number
  - See [Gruntfile.js](Gruntfile.js) for more details.
